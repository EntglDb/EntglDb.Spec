import{_ as t,a as e,p as s,o as i}from"./index-Rcv9hXeT.js";const o={},n={class:"spec-content"};function r(d,a){return i(),e("div",n,[...a[0]||(a[0]=[s('<h1 data-v-024444a0>Architecture</h1><p class="lead" data-v-024444a0>EntglDb is a leaderless, peer-to-peer database designed for local-first applications.</p><section data-v-024444a0><h2 data-v-024444a0>Design Philosophy</h2><ul data-v-024444a0><li data-v-024444a0><strong data-v-024444a0>Local First:</strong> Reads and writes happen locally on the device (SQLite), ensuring zero-latency and offline availability.</li><li data-v-024444a0><strong data-v-024444a0>Peer-to-Peer:</strong> No central server. Every node is equal.</li><li data-v-024444a0><strong data-v-024444a0>Eventually Consistent:</strong> Data converges across the cluster using Conflict-Free Replicated Data Types (CRDT) principals.</li></ul></section><section data-v-024444a0><h2 data-v-024444a0>Hybrid Logical Clock (HLC)</h2><p data-v-024444a0>To order events without a central authority, EntglDb uses Hybrid Logical Clocks. This combines physical time with a logical counter to capture causality.</p><div class="alert-box" data-v-024444a0><strong data-v-024444a0>Last Write Wins (LWW)</strong><p data-v-024444a0>By default, conflicts are resolved by comparing HLC timestamps. The higher timestamp wins.</p></div></section><section data-v-024444a0><h2 data-v-024444a0>Synchronization</h2><p data-v-024444a0>Sync happens in two stages:</p><ol data-v-024444a0><li data-v-024444a0><strong data-v-024444a0>Discovery:</strong> Nodes find each other on the LAN via UDP Multicast.</li><li data-v-024444a0><strong data-v-024444a0>Anti-Entropy:</strong> Nodes pair up via TCP and exchange Merkle Trees (or High Water Marks) to identify missing data.</li></ol><h3 data-v-024444a0>Gossip Protocol</h3><p data-v-024444a0>Updates propagate via an epidemic algorithm. When a node changes data, it pushes it to random connected peers, who in turn push it to others.</p></section><section data-v-024444a0><h2 data-v-024444a0>Data Flow</h2><div class="flow-diagram" data-v-024444a0><div class="step" data-v-024444a0>App Write ➔ Local SQLite ➔ OpLog ➔ Sync Orchestrator ➔ TCP Push ➔ Remote Peer</div></div></section>',6)])])}const l=t(o,[["render",r],["__scopeId","data-v-024444a0"]]);export{l as default};
